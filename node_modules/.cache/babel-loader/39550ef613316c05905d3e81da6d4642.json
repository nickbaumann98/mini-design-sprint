{"ast":null,"code":"var _jsxFileName = \"/Users/nickbaumann/Develop/mini-design-sprint/src/components/AIChat.js\";\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SimpleMarkdown from 'simple-markdown';\nimport { getGPTResponse } from '../utils/gptService';\nimport { sprintGuidance, getSprintTip } from '../utils/sprintResources';\nimport { createSprintDay, states } from './sprintStateMachine';\n\n// Styled components remain the same\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  border-radius: 8px;\n  padding: 1.5rem;\n  font-family: 'Roboto', sans-serif;\n  height: 60vh;\n  overflow-y: auto;\n`;\nconst Message = styled.div`\n  background-color: ${props => props.isUser ? '#3c8ce7' : '#2a2a2a'};\n  color: #ffffff;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  align-self: ${props => props.isUser ? 'flex-end' : 'flex-start'};\n  max-width: 80%;\n`;\nconst RelayIcon = styled.span`\n  color: #3c8ce7;\n  margin-right: 0.5rem;\n`;\nconst InputContainer = styled.div`\n  display: flex;\n  margin-top: 1rem;\n  align-items: flex-end;\n`;\nconst Input = styled.textarea`\n  flex: 1;\n  padding: 0.8rem;\n  font-size: 1rem;\n  border: none;\n  border-radius: 4px;\n  background-color: #2a2a2a;\n  color: #ffffff;\n  resize: none;\n  min-height: 40px;\n  overflow-y: hidden;\n`;\nconst SendButton = styled.button`\n  background-color: #3c8ce7;\n  color: #ffffff;\n  border: none;\n  padding: 0.8rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  border-radius: 4px;\n  margin-left: 0.5rem;\n  height: 40px;\n`;\nconst NextDayButton = styled.button`\n  background-color: #3c8ce7;\n  color: #ffffff;\n  border: none;\n  padding: 10px 20px;\n  font-size: 1rem;\n  cursor: pointer;\n  border-radius: 5px;\n  margin-top: 1rem;\n`;\nconst MoreInfoButton = styled.button`\n  background-color: transparent;\n  color: #3c8ce7;\n  border: 1px solid #3c8ce7;\n  padding: 5px 10px;\n  font-size: 0.8rem;\n  cursor: pointer;\n  border-radius: 4px;\n  margin-top: 0.5rem;\n`;\nconst parseMarkdown = markdown => {\n  const rawBuiltParser = SimpleMarkdown.parserFor(SimpleMarkdown.defaultRules);\n  const parser = source => {\n    const blockSource = source + \"\\n\\n\";\n    return rawBuiltParser(blockSource);\n  };\n  const reactOutput = SimpleMarkdown.reactFor(SimpleMarkdown.ruleOutput(SimpleMarkdown.defaultRules, 'react'));\n  return reactOutput(parser(markdown));\n};\nconst AIChat = ({\n  day,\n  onUpdateDeliverable,\n  onNextDay\n}) => {\n  const sprintDay = createSprintDay(day);\n  const [currentState, setCurrentState] = useState(sprintDay.initialState);\n  const [messages, setMessages] = useState([{\n    text: `Hi, I'm Relay, your AI assistant for this mini design sprint. Welcome to Day ${day}! ${sprintDay.prompts[sprintDay.initialState]}`,\n    isUser: false\n  }]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [dayData, setDayData] = useState({});\n  const inputRef = useRef(null);\n  const getAIResponse = useCallback(async (prompt, currentDay) => {\n    setIsLoading(true);\n    try {\n      const aiResponse = await getGPTResponse(getAIPrompt(prompt, currentDay, messages, currentState, dayData));\n      const aiMessage = {\n        text: aiResponse,\n        isUser: false\n      };\n      setMessages(prev => [...prev, aiMessage]);\n      const nextState = sprintDay.transitions[currentState];\n      if (nextState) {\n        setCurrentState(nextState);\n        if (nextState === states.COMPLETED && isDataComplete()) {\n          const deliverable = await getGPTResponse(getDeliverablePrompt(currentDay, dayData));\n          onUpdateDeliverable(currentDay, deliverable);\n        }\n      }\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      setMessages(prev => [...prev, {\n        text: \"I apologize, but I'm having trouble processing that request. Let's try a different approach. \" + getSprintTip(day),\n        isUser: false\n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentState, sprintDay, onUpdateDeliverable, day, messages, dayData]);\n  const isDataComplete = () => {\n    const requiredFields = sprintDay.requiredFields || [];\n    return requiredFields.every(field => dayData[field] && dayData[field].length > 0);\n  };\n  const handleSend = async () => {\n    if (input.trim() && !isLoading) {\n      const userMessage = {\n        text: input,\n        isUser: true\n      };\n      setMessages(prev => [...prev, userMessage]);\n      setDayData(prev => ({\n        ...prev,\n        [currentState]: input\n      }));\n      const currentInput = input;\n      setInput('');\n      await getAIResponse(currentInput, day);\n    }\n  };\n  const handleInputChange = e => {\n    setInput(e.target.value);\n    e.target.style.height = 'auto';\n    e.target.style.height = `${e.target.scrollHeight}px`;\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  const handleNextDay = () => {\n    onNextDay();\n  };\n  const handleMoreInfo = () => {\n    getAIResponse(\"Can you elaborate on that?\", day);\n  };\n  useEffect(() => {\n    if (currentState === states.COMPLETED && isDataComplete()) {\n      const nextDayMessage = `Great job completing Day ${day}! Let's move on to Day ${day + 1}. ${sprintGuidance[day + 1].prompt}`;\n      setMessages(prev => [...prev, {\n        text: nextDayMessage,\n        isUser: false\n      }]);\n    }\n  }, [currentState, day, dayData]);\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${inputRef.current.scrollHeight}px`;\n    }\n  }, [input]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ChatContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, messages.map((message, index) => /*#__PURE__*/React.createElement(Message, {\n    key: index,\n    isUser: message.isUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, !message.isUser && /*#__PURE__*/React.createElement(RelayIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 33\n    }\n  }, \":-) Relay\"), parseMarkdown(message.text)))), /*#__PURE__*/React.createElement(InputContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    ref: inputRef,\n    value: input,\n    onChange: handleInputChange,\n    onKeyPress: handleKeyPress,\n    placeholder: \"Type your message...\",\n    disabled: isLoading || currentState === states.COMPLETED,\n    rows: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SendButton, {\n    onClick: handleSend,\n    disabled: isLoading || currentState === states.COMPLETED,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, isLoading ? 'Thinking...' : 'Send')), currentState === states.COMPLETED && /*#__PURE__*/React.createElement(NextDayButton, {\n    onClick: handleNextDay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, \"Move to Day \", day + 1), !isLoading && currentState !== states.COMPLETED && /*#__PURE__*/React.createElement(MoreInfoButton, {\n    onClick: handleMoreInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, \"More Info\"));\n};\nconst getAIPrompt = (userInput, day, context, currentState, dayData) => {\n  var _context;\n  const {\n    goal,\n    tasks\n  } = sprintGuidance[day];\n  const lastUserMessage = ((_context = context[context.length - 1]) === null || _context === void 0 ? void 0 : _context.text) || '';\n  let prompt = `You are Relay, an AI assistant for a mini design sprint. It's Day ${day}, and the current state is ${currentState}. Be concise and direct.\n  Goal: ${goal}\n  Tasks: ${tasks.join(', ')}\n  User's last message: \"${lastUserMessage}\"\n  Current data: ${JSON.stringify(dayData)}\n\n  If the user hasn't provided a clear answer to the current task, explain why their response is insufficient and what specific information you need.\n  If you're repeating a question, acknowledge it and explain why you need more clarity.\n  Respond in 1-2 short sentences max. Focus on the most important next step or question for the current state.`;\n  if (currentState === states.COMPLETED) {\n    prompt += \" Summarize the key points and include [SHOW_NEXT_DAY_BUTTON].\";\n  }\n  return prompt;\n};\nconst getDeliverablePrompt = (day, dayData) => {\n  const {\n    goal\n  } = sprintGuidance[day];\n  return `Summarize key points for Day ${day} based on: ${JSON.stringify(dayData)}\n  Goal: ${goal}\n  Provide 2-3 bullet points max. Be extremely concise and specific.`;\n};\nexport default AIChat;","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","styled","SimpleMarkdown","getGPTResponse","sprintGuidance","getSprintTip","createSprintDay","states","ChatContainer","div","Message","props","isUser","RelayIcon","span","InputContainer","Input","textarea","SendButton","button","NextDayButton","MoreInfoButton","parseMarkdown","markdown","rawBuiltParser","parserFor","defaultRules","parser","source","blockSource","reactOutput","reactFor","ruleOutput","AIChat","day","onUpdateDeliverable","onNextDay","sprintDay","currentState","setCurrentState","initialState","messages","setMessages","text","prompts","input","setInput","isLoading","setIsLoading","dayData","setDayData","inputRef","getAIResponse","prompt","currentDay","aiResponse","getAIPrompt","aiMessage","prev","nextState","transitions","COMPLETED","isDataComplete","deliverable","getDeliverablePrompt","error","console","requiredFields","every","field","length","handleSend","trim","userMessage","currentInput","handleInputChange","e","target","value","style","height","scrollHeight","handleKeyPress","key","shiftKey","preventDefault","handleNextDay","handleMoreInfo","nextDayMessage","current","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","message","index","ref","onChange","onKeyPress","placeholder","disabled","rows","onClick","userInput","context","_context","goal","tasks","lastUserMessage","join","JSON","stringify"],"sources":["/Users/nickbaumann/Develop/mini-design-sprint/src/components/AIChat.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SimpleMarkdown from 'simple-markdown';\nimport { getGPTResponse } from '../utils/gptService';\nimport { sprintGuidance, getSprintTip } from '../utils/sprintResources';\nimport { createSprintDay, states } from './sprintStateMachine';\n\n// Styled components remain the same\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #1e1e1e;\n  border-radius: 8px;\n  padding: 1.5rem;\n  font-family: 'Roboto', sans-serif;\n  height: 60vh;\n  overflow-y: auto;\n`;\n\nconst Message = styled.div`\n  background-color: ${props => props.isUser ? '#3c8ce7' : '#2a2a2a'};\n  color: #ffffff;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  align-self: ${props => props.isUser ? 'flex-end' : 'flex-start'};\n  max-width: 80%;\n`;\n\nconst RelayIcon = styled.span`\n  color: #3c8ce7;\n  margin-right: 0.5rem;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  margin-top: 1rem;\n  align-items: flex-end;\n`;\n\nconst Input = styled.textarea`\n  flex: 1;\n  padding: 0.8rem;\n  font-size: 1rem;\n  border: none;\n  border-radius: 4px;\n  background-color: #2a2a2a;\n  color: #ffffff;\n  resize: none;\n  min-height: 40px;\n  overflow-y: hidden;\n`;\n\nconst SendButton = styled.button`\n  background-color: #3c8ce7;\n  color: #ffffff;\n  border: none;\n  padding: 0.8rem 1.5rem;\n  font-size: 1rem;\n  cursor: pointer;\n  border-radius: 4px;\n  margin-left: 0.5rem;\n  height: 40px;\n`;\n\nconst NextDayButton = styled.button`\n  background-color: #3c8ce7;\n  color: #ffffff;\n  border: none;\n  padding: 10px 20px;\n  font-size: 1rem;\n  cursor: pointer;\n  border-radius: 5px;\n  margin-top: 1rem;\n`;\n\nconst MoreInfoButton = styled.button`\n  background-color: transparent;\n  color: #3c8ce7;\n  border: 1px solid #3c8ce7;\n  padding: 5px 10px;\n  font-size: 0.8rem;\n  cursor: pointer;\n  border-radius: 4px;\n  margin-top: 0.5rem;\n`;\n\nconst parseMarkdown = (markdown) => {\n  const rawBuiltParser = SimpleMarkdown.parserFor(SimpleMarkdown.defaultRules);\n  const parser = (source) => {\n    const blockSource = source + \"\\n\\n\";\n    return rawBuiltParser(blockSource);\n  };\n  const reactOutput = SimpleMarkdown.reactFor(SimpleMarkdown.ruleOutput(SimpleMarkdown.defaultRules, 'react'));\n  return reactOutput(parser(markdown));\n};\n\nconst AIChat = ({ day, onUpdateDeliverable, onNextDay }) => {\n  const sprintDay = createSprintDay(day);\n  const [currentState, setCurrentState] = useState(sprintDay.initialState);\n  const [messages, setMessages] = useState([\n    { text: `Hi, I'm Relay, your AI assistant for this mini design sprint. Welcome to Day ${day}! ${sprintDay.prompts[sprintDay.initialState]}`, isUser: false }\n  ]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [dayData, setDayData] = useState({});\n  const inputRef = useRef(null);\n\n  const getAIResponse = useCallback(async (prompt, currentDay) => {\n    setIsLoading(true);\n    try {\n      const aiResponse = await getGPTResponse(getAIPrompt(prompt, currentDay, messages, currentState, dayData));\n      const aiMessage = { text: aiResponse, isUser: false };\n      setMessages(prev => [...prev, aiMessage]);\n\n      const nextState = sprintDay.transitions[currentState];\n      if (nextState) {\n        setCurrentState(nextState);\n        if (nextState === states.COMPLETED && isDataComplete()) {\n          const deliverable = await getGPTResponse(getDeliverablePrompt(currentDay, dayData));\n          onUpdateDeliverable(currentDay, deliverable);\n        }\n      }\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      setMessages(prev => [...prev, { \n        text: \"I apologize, but I'm having trouble processing that request. Let's try a different approach. \" + getSprintTip(day), \n        isUser: false \n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentState, sprintDay, onUpdateDeliverable, day, messages, dayData]);\n\n  const isDataComplete = () => {\n    const requiredFields = sprintDay.requiredFields || [];\n    return requiredFields.every(field => dayData[field] && dayData[field].length > 0);\n  };\n\n  const handleSend = async () => {\n    if (input.trim() && !isLoading) {\n      const userMessage = { text: input, isUser: true };\n      setMessages(prev => [...prev, userMessage]);\n      setDayData(prev => ({...prev, [currentState]: input}));\n      const currentInput = input;\n      setInput('');\n      await getAIResponse(currentInput, day);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setInput(e.target.value);\n    e.target.style.height = 'auto';\n    e.target.style.height = `${e.target.scrollHeight}px`;\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleNextDay = () => {\n    onNextDay();\n  };\n\n  const handleMoreInfo = () => {\n    getAIResponse(\"Can you elaborate on that?\", day);\n  };\n\n  useEffect(() => {\n    if (currentState === states.COMPLETED && isDataComplete()) {\n      const nextDayMessage = `Great job completing Day ${day}! Let's move on to Day ${day + 1}. ${sprintGuidance[day + 1].prompt}`;\n      setMessages(prev => [...prev, { text: nextDayMessage, isUser: false }]);\n    }\n  }, [currentState, day, dayData]);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${inputRef.current.scrollHeight}px`;\n    }\n  }, [input]);\n\n  return (\n    <>\n      <ChatContainer>\n        {messages.map((message, index) => (\n          <Message key={index} isUser={message.isUser}>\n            {!message.isUser && <RelayIcon>:-) Relay</RelayIcon>}\n            {parseMarkdown(message.text)}\n          </Message>\n        ))}\n      </ChatContainer>\n      <InputContainer>\n        <Input\n          ref={inputRef}\n          value={input}\n          onChange={handleInputChange}\n          onKeyPress={handleKeyPress}\n          placeholder=\"Type your message...\"\n          disabled={isLoading || currentState === states.COMPLETED}\n          rows={1}\n        />\n        <SendButton onClick={handleSend} disabled={isLoading || currentState === states.COMPLETED}>\n          {isLoading ? 'Thinking...' : 'Send'}\n        </SendButton>\n      </InputContainer>\n      {currentState === states.COMPLETED && (\n        <NextDayButton onClick={handleNextDay}>\n          Move to Day {day + 1}\n        </NextDayButton>\n      )}\n      {!isLoading && currentState !== states.COMPLETED && (\n        <MoreInfoButton onClick={handleMoreInfo}>\n          More Info\n        </MoreInfoButton>\n      )}\n    </>\n  );\n};\n\nconst getAIPrompt = (userInput, day, context, currentState, dayData) => {\n  const { goal, tasks } = sprintGuidance[day];\n  const lastUserMessage = context[context.length - 1]?.text || '';\n  \n  let prompt = `You are Relay, an AI assistant for a mini design sprint. It's Day ${day}, and the current state is ${currentState}. Be concise and direct.\n  Goal: ${goal}\n  Tasks: ${tasks.join(', ')}\n  User's last message: \"${lastUserMessage}\"\n  Current data: ${JSON.stringify(dayData)}\n\n  If the user hasn't provided a clear answer to the current task, explain why their response is insufficient and what specific information you need.\n  If you're repeating a question, acknowledge it and explain why you need more clarity.\n  Respond in 1-2 short sentences max. Focus on the most important next step or question for the current state.`;\n\n  if (currentState === states.COMPLETED) {\n    prompt += \" Summarize the key points and include [SHOW_NEXT_DAY_BUTTON].\";\n  }\n\n  return prompt;\n};\n\nconst getDeliverablePrompt = (day, dayData) => {\n  const { goal } = sprintGuidance[day];\n  return `Summarize key points for Day ${day} based on: ${JSON.stringify(dayData)}\n  Goal: ${goal}\n  Provide 2-3 bullet points max. Be extremely concise and specific.`;\n};\n\nexport default AIChat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}